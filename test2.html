<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html>
    <head>
        <title></title>
        <script src="SugarSkull.js" type="text/javascript" charset="utf-8"></script>
        <script type="text/javascript" charset="utf-8">

				(function() {

					var server = "production"; // this is just an arbitrary variable used in the example.

					return {

						Main: function() {

							APP.exec(this, { /* <Object> we caputre the context of the current object literal and explain what to do with its members */

								ns: "FOO.bar", /* <String> let's add this object literal to a namespace (doesn't overwrite adds on to existing objects) */

								first: [ /* <Array> the names of functions from the object literal that we want to be executed immediately. */

									"fnOne", /* a function name from the object literal */
									["fnTwo", 200] /* ...another function with some parameters, this can also be done in the route definitions. */
								],

								routes: { /* a collection of named routes that can be called in an arbitrary fashion. */

									"fooRoute": {
										route: ["home", "foo"], /* <String | Array> the route components */
										on: "fnThree" /* <String | Array> function(s) to run on this primary route */
									},
									"barRoute": { /* a route with a regex */
										route: ["home", "bar", "*"], /* anything after the second part of the hash/url */
										once: true, /* <bool> should the functions for this route be only run once? */
										leave: "fnThreeA", /* <String | Array> function(s) to run after this route is changed */																				
										on: "fnFour"
									},
									"bazzRoute": { /* a route with a regex */
										route: ["about", "*", server], /* anything after the second part of the hash/url */
										on: "fnFour"
									}

								},

								onAllRoutes: "fnOne", /* <String | Array> functions that are fired on all routes */
								leaveAllRoutes: ["fnTwo", "fnThree"] /* <String | Array> functions that are fired when all routes are exited */

							});
						},

						/* implementations... */

						fnOne: function() {
						  console.log("fnOne called.");
						  console.dir(this); // the this context is the object literal.
						},

						fnTwo: function(args) {
							console.log("fnTwo called with(" + args[0] + ")");
						},

						fnThree: function() {
						  console.log("fnThree called.");
						},

						fnThreeA: function() {
						  console.log("fnThreeA called.");
						},

						fnThreeB: function() {
						  console.log("fnThreeB called.");
						},

						fnFour: function(routeName) { 

							// routeName always gets returned as the last parameter of a function that was called by a route.
						  console.log("fnFour called with (" + routeName + ")");

						},

						fnFive: function() {
						  console.log("fnFive called.");						    
						}

          }

        })().Main();

        </script>
    </head>
    <body>

    </body>
</html>
